# 流程图制作工具使用指南

## 文档信息
- **创建日期**: 2025年8月25日
- **维护人员**: 品高线上运营室
- **版本**: v1.0
- **适用对象**: 项目开发人员、业务分析师、流程设计师

## 概述
本指南详细介绍如何使用项目中已安装的流程图制作工具，包括Excalidraw和Draw.io两个主要工具的配置、启动和使用方法。

---

## 一、可用的流程图制作工具

### 1.1 Excalidraw MCP服务器
**位置**: `S:\PG-GMO\project\MCP\image-generation\excalidraw-mcp\`

**特点**:
- 手绘风格的流程图和图表
- 实时协作和WebSocket同步
- 支持AI代理通过MCP协议创建图表
- 简洁的用户界面
- 支持多种图形元素（矩形、椭圆、箭头、文本等）

**适用场景**:
- 快速原型设计
- 概念图和思维导图
- 系统架构图
- 流程图和工作流

### 1.2 Draw.io MCP服务器
**位置**: `S:\PG-GMO\project\MCP\image-generation\drawio-mcp\`

**特点**:
- 专业的图表制作工具
- 丰富的模板和图形库
- 支持复杂的技术图表
- 与浏览器扩展集成
- 支持多种导出格式

**适用场景**:
- 技术架构图
- 数据库设计图
- 网络拓扑图
- 详细的业务流程图

---

## 二、Excalidraw使用指南

### 2.1 环境要求
- Node.js (v18或更高版本)
- npm或pnpm包管理器
- 现代浏览器（Chrome、Firefox、Safari等）

### 2.2 启动步骤

#### 方法一：生产模式启动（推荐）
```bash
# 进入Excalidraw目录
cd S:\PG-GMO\project\MCP\image-generation\excalidraw-mcp

# 安装依赖（首次使用）
npm install

# 构建前端
npm run build

# 启动画布服务器
npm run canvas
```

#### 方法二：开发模式启动
```bash
# 启动开发服务器（包含热重载）
npm run dev
```

### 2.3 访问界面
启动成功后，在浏览器中访问：
```
http://localhost:3000
```

### 2.4 基本使用方法

#### 2.4.1 手动创建图形
1. 打开浏览器访问 `http://localhost:3000`
2. 检查连接状态（应显示"Connected"）
3. 使用工具栏创建各种图形元素
4. 拖拽和调整图形位置和大小
5. 添加文本和标注

#### 2.4.2 通过MCP API创建图形

**创建矩形**:
```javascript
{
  "type": "rectangle",
  "x": 100,
  "y": 100,
  "width": 200,
  "height": 100,
  "backgroundColor": "#e3f2fd",
  "strokeColor": "#1976d2",
  "strokeWidth": 2
}
```

**创建文本**:
```javascript
{
  "type": "text",
  "x": 150,
  "y": 125,
  "text": "流程步骤",
  "fontSize": 16,
  "strokeColor": "#333333"
}
```

**创建箭头**:
```javascript
{
  "type": "arrow",
  "x": 300,
  "y": 150,
  "width": 100,
  "height": 0,
  "strokeColor": "#1976d2",
  "strokeWidth": 2
}
```

### 2.5 可用的MCP工具

#### 元素管理
- `create_element` - 创建任意类型的图形元素
- `update_element` - 修改现有元素
- `delete_element` - 删除元素
- `query_elements` - 搜索和查询元素

#### 批量操作
- `batch_create_elements` - 一次创建多个元素

#### 元素组织
- `group_elements` - 组合多个元素
- `ungroup_elements` - 取消组合
- `align_elements` - 对齐元素（左、中、右、上、中、下）
- `distribute_elements` - 均匀分布元素
- `lock_elements` / `unlock_elements` - 锁定/解锁元素

---

## 三、Draw.io使用指南

### 3.1 环境要求
- Node.js (v18或更高版本)
- Chrome或Firefox浏览器
- Draw.io MCP浏览器扩展

### 3.2 安装和配置

#### 3.2.1 安装MCP服务器
```bash
# 使用npm全局安装
npm install -g drawio-mcp-server

# 或使用npx运行
npx -y drawio-mcp-server
```

#### 3.2.2 安装浏览器扩展
1. 打开 [Draw.io网站](https://app.diagrams.net/)
2. 安装Draw.io MCP浏览器扩展
3. 确保扩展已启用并连接到MCP服务器

### 3.3 基本使用方法

#### 3.3.1 创建新图表
1. 访问 https://app.diagrams.net/
2. 选择存储位置（本地、Google Drive、OneDrive等）
3. 选择模板或创建空白图表
4. 使用工具栏和图形库创建图表

#### 3.3.2 常用图形类型
- **流程图**: 使用流程图形状库
- **组织架构图**: 使用组织图模板
- **网络图**: 使用网络图形库
- **UML图**: 使用UML图形库
- **ER图**: 使用实体关系图模板

---

## 四、实际应用示例

### 4.1 创建业务流程图

#### 使用Excalidraw创建简单流程图
```javascript
// 1. 创建开始节点
{
  "type": "ellipse",
  "x": 100,
  "y": 100,
  "width": 120,
  "height": 60,
  "backgroundColor": "#c8e6c9",
  "strokeColor": "#4caf50"
}

// 2. 添加开始文本
{
  "type": "text",
  "x": 160,
  "y": 130,
  "text": "开始",
  "fontSize": 14
}

// 3. 创建处理节点
{
  "type": "rectangle",
  "x": 100,
  "y": 200,
  "width": 120,
  "height": 60,
  "backgroundColor": "#e3f2fd",
  "strokeColor": "#2196f3"
}

// 4. 添加处理文本
{
  "type": "text",
  "x": 160,
  "y": 230,
  "text": "处理数据",
  "fontSize": 14
}

// 5. 创建连接箭头
{
  "type": "arrow",
  "x": 160,
  "y": 160,
  "width": 0,
  "height": 40,
  "strokeColor": "#666666"
}
```

### 4.2 创建系统架构图

#### 使用Draw.io创建技术架构图
1. 选择"Software"类别的模板
2. 使用"AWS"或"Azure"图形库
3. 拖拽服务组件到画布
4. 使用连接线表示数据流
5. 添加标签和说明文字

---

## 五、最佳实践

### 5.1 设计原则
- **简洁明了**: 避免过于复杂的图表
- **一致性**: 使用统一的颜色和样式
- **层次清晰**: 合理使用分组和层级
- **标注完整**: 为关键元素添加说明

### 5.2 颜色规范
- **开始/结束**: 绿色系 (#4caf50, #c8e6c9)
- **处理步骤**: 蓝色系 (#2196f3, #e3f2fd)
- **决策节点**: 橙色系 (#ff9800, #fff3e0)
- **错误/异常**: 红色系 (#f44336, #ffebee)

### 5.3 文件管理
- 使用有意义的文件名
- 定期备份重要图表
- 为复杂图表添加版本控制
- 导出多种格式（PNG、SVG、PDF）

---

## 六、故障排除

### 6.1 Excalidraw常见问题

**问题**: 无法访问 http://localhost:3000
**解决方案**:
1. 检查服务器是否正常启动
2. 确认端口3000未被占用
3. 检查防火墙设置

**问题**: MCP连接失败
**解决方案**:
1. 重启MCP服务器
2. 检查WebSocket连接
3. 清除浏览器缓存

### 6.2 Draw.io常见问题

**问题**: 浏览器扩展无法连接
**解决方案**:
1. 重新安装浏览器扩展
2. 检查扩展权限设置
3. 重启浏览器

**问题**: 图表无法保存
**解决方案**:
1. 检查存储权限
2. 尝试不同的存储位置
3. 清除浏览器数据

---

## 七、进阶功能

### 7.1 自动化流程图生成
通过AI代理和MCP协议，可以实现：
- 根据文本描述自动生成流程图
- 批量创建标准化图表
- 动态更新图表内容

### 7.2 集成其他工具
- 与项目管理工具集成
- 导出到文档系统
- 与版本控制系统集成

---

## 八、总结

本指南涵盖了Excalidraw和Draw.io两个主要流程图制作工具的完整使用方法。通过合理选择和使用这些工具，可以高效地创建各种类型的图表和流程图，提升工作效率和沟通效果。

建议根据具体需求选择合适的工具：
- **快速原型和概念图**: 使用Excalidraw
- **专业技术图表**: 使用Draw.io
- **协作和实时编辑**: 优先考虑Excalidraw
- **复杂图表和模板**: 优先考虑Draw.io

---

**最后更新**: 2025年8月25日
**维护人员**: 品高线上运营室